<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DWP PLUG - THENEW PACK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="importmap">
    {
      "imports": {
        "react-dom": "https://esm.sh/react-dom@19.2.4",
        "react-dom/client": "https://esm.sh/react-dom@19.2.4/client",
        "react": "https://esm.sh/react@19.2.4"
      }
    }
    </script>
</head>
<body class="bg-black text-white antialiased">
    <div id="root"></div>
    <script type="module">
        import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';
        import ReactDOM from 'react-dom/client';

        const CONFIG = {"downloadUrl":"https://m.youtube.com/watch?v=A4HkqFL8DpE","presetName":"THENEW PACK","presetSize":"4.2 MB","presetFormat":".DWP"};
        const FIRE_COLORS = ["#FF0000","#FF4500","#FF8C00","#FFA500","#FFD700"];
        const MUSIC_PHRASES = ["Adding compression to the snare...","EQ'ing the perfect kick drum...","Adjusting the reverb tail...","Saturating the lead synth...","Sidechaining the bass to the kick...","Fine-tuning the oscillator pitch...","Layering cinematic pads...","Filtering the white noise sweep...","Optimizing the stereo image...","Perfecting the gain staging...","Automating the cutoff filter...","Harmonizing the vocal tracks..."];

        // Re-implementing the Downloader component exactly as in the main app
        const useParticles = () => {
          const [particles, setParticles] = useState([]);
          const nextParticleId = useRef(0);
          const spawnParticles = (e) => {
            const rect = e.currentTarget.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const newParticles = [];
            for (let i = 0; i < 20; i++) {
              newParticles.push({
                id: nextParticleId.current++,
                x, y, size: Math.random() * 5 + 2,
                color: FIRE_COLORS[Math.floor(Math.random() * FIRE_COLORS.length)],
                vx: (Math.random() - 0.5) * 8, vy: (Math.random() * -10) - 2, life: 1.0,
              });
            }
            setParticles(prev => [...prev, ...newParticles]);
          };
          useEffect(() => {
            if (particles.length === 0) return;
            const interval = setInterval(() => {
              setParticles(prev => prev.map(p => ({ ...p, x: p.x + p.vx, y: p.y + p.vy, vx: p.vx * 0.98, vy: p.vy - 0.15, life: p.life - 0.03 })).filter(p => p.life > 0));
            }, 30);
            return () => clearInterval(interval);
          }, [particles]);
          return { particles, spawnParticles };
        };

        const Downloader = () => {
          const [adBlockDetected, setAdBlockDetected] = useState(false);
          const [timeLeft, setTimeLeft] = useState(60);
          const [isReady, setIsReady] = useState(false);
          const { particles, spawnParticles } = useParticles();
          
          useEffect(() => {
            const bait = document.createElement('div');
            bait.className = 'adsbygoogle';
            bait.style.position = 'absolute'; bait.style.left = '-1000px';
            document.body.appendChild(bait);
            setTimeout(() => {
              if (window.getComputedStyle(bait).display === 'none' || bait.offsetHeight === 0) setAdBlockDetected(true);
              document.body.removeChild(bait);
            }, 800);
          }, []);

          useEffect(() => {
            if (adBlockDetected || isReady) return;
            if (timeLeft > 0) {
              const t = setInterval(() => setTimeLeft(p => p - 1), 1000);
              return () => clearInterval(t);
            } else setIsReady(true);
          }, [timeLeft, adBlockDetected, isReady]);

          return React.createElement('div', { className: 'min-h-screen bg-[#050505] text-white flex flex-col items-center px-4 py-8 relative overflow-hidden' },
            React.createElement('div', { className: 'fixed inset-0 pointer-events-none z-50' }, 
              particles.map(p => React.createElement('div', { key: p.id, className: 'absolute rounded-full', style: { left: p.x, top: p.y, width: p.size, height: p.size, backgroundColor: p.color, opacity: p.life, boxShadow: '0 0 ' + (p.size*2) + 'px ' + p.color, transform: 'translate(-50%,-50%)' } }))
            ),
            adBlockDetected && React.createElement('div', { className: 'fixed inset-0 z-[60] flex items-center justify-center bg-black/95 p-6 backdrop-blur-md' },
              React.createElement('div', { className: 'max-w-md bg-zinc-900 border border-[#DAA520]/30 p-10 rounded-[3rem] text-center' },
                React.createElement('i', { className: 'fas fa-hand-paper text-5xl mb-4 text-[#DAA520]' }),
                React.createElement('h2', { className: 'text-2xl font-bold mb-4 uppercase tracking-widest' }, 'AdBlock Detected'),
                React.createElement('p', { className: 'text-zinc-500 mb-6' }, 'Please disable AdBlock to access this free download.'),
                React.createElement('button', { onClick: () => window.location.reload(), className: 'w-full bg-[#DAA520] text-black font-black py-4 rounded-2xl' }, 'I HAVE DISABLED IT')
              )
            ),
            React.createElement('div', { className: 'mb-12 text-center' },
              React.createElement('h1', { className: 'text-[#DAA520] font-black text-4xl italic tracking-tighter mb-2' }, 'DWP PLUG'),
              React.createElement('p', { className: 'text-zinc-500 text-[10px] uppercase tracking-[0.5em] font-bold' }, 'Premium Sound Resources')
            ),
            React.createElement('div', { className: 'w-full max-w-xl bg-zinc-900/40 border border-zinc-800/80 p-10 rounded-[3rem] backdrop-blur-xl mb-8 shadow-2xl' },
               React.createElement('div', { className: 'flex items-center gap-6 mb-10' },
                 React.createElement('div', { className: 'w-16 h-16 bg-zinc-800 rounded-2xl flex items-center justify-center border border-zinc-700' }, 
                   React.createElement('i', { className: 'fas fa-compact-disc text-2xl text-[#DAA520]' })),
                 React.createElement('div', null,
                   React.createElement('h3', { className: 'font-bold text-xl text-white' }, CONFIG.presetName),
                   React.createElement('div', { className: 'flex gap-2 text-zinc-500 text-[10px] font-bold uppercase' }, 
                     React.createElement('span', { className: 'text-[#DAA520]' }, CONFIG.presetFormat),
                     React.createElement('span', null, 'â€¢'),
                     React.createElement('span', null, CONFIG.presetSize)
                   )
                 )
               ),
               React.createElement('div', { className: 'space-y-8' },
                 !isReady ? React.createElement('div', { className: 'space-y-4' },
                   React.createElement('div', { className: 'flex justify-between items-end' },
                     React.createElement('span', { className: 'text-[10px] font-bold text-[#DAA520] uppercase' }, 'Preparing Secure Link...'),
                     React.createElement('span', { className: 'text-3xl font-black' }, Math.floor(((60-timeLeft)/60)*100) + '%')
                   ),
                   React.createElement('div', { className: 'h-2 w-full bg-zinc-800 rounded-full overflow-hidden' },
                     React.createElement('div', { className: 'h-full bg-[#DAA520] transition-all duration-1000', style: { width: ((60-timeLeft)/60)*100 + '%' } })
                   )
                 ) : React.createElement('div', { className: 'text-center p-5 bg-[#DAA520]/5 border border-[#DAA520]/20 rounded-2xl text-[#DAA520] font-black' }, 'FILE READY'),
                 React.createElement('button', {
                   onMouseDown: (e) => { spawnParticles(e); if(isReady) setTimeout(() => window.location.href = CONFIG.downloadUrl, 300); },
                   disabled: !isReady,
                   className: 'w-full py-6 rounded-2xl font-black text-lg uppercase tracking-widest transition-all bg-[#DAA520] text-black disabled:opacity-50 disabled:bg-zinc-800 disabled:text-zinc-600'
                 }, isReady ? 'Download Now' : 'Link Encrypting...')
               )
            )
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(Downloader));
    </script>
</body>
</html>